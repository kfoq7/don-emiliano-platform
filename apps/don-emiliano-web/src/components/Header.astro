---
import MenuDropNav from './ui/MenuDropNav.astro'
import Phone from './icons/Phone.astro'
// import WhatsappIcon from '@/components/icons/WhatsappIcon.astro'

// const links = [
//   {
//     name: 'Contactanos',
//     url: '/contact',
//   },
// ]

const businessHours = {
  open: 7,
  close: 22,
  days: [1, 2, 3, 4, 5, 6],
}

const now = new Date()
const peruTime = new Date(now.toLocaleString('en-US', { timeZone: 'America/Lima' }))
const currentHour = peruTime.getHours()
const currentDay = peruTime.getDay()

const isOpen =
  businessHours.days.includes(currentDay) &&
  currentHour >= businessHours.open &&
  currentHour < businessHours.close
---

<header
  class="fixed top-0 left-0 right-0 z-50 bg-white mb-8 border-b border-gray-300/60 drop-shadow-md"
>
  <div class="w-full bg-primary">
    <div class="container mx-auto px-4 py-1">
      <div class="flex flex-wrap items-center justify-center gap-4 text-sm">
        <div class="flex items-center gap-1">
          <Phone />
          <span class="text-white font-semibold">994932432</span>
        </div>
        <div class="text-white font-semibold">Lun-Sab: 7am - 10pm</div>
        <a href="/" class="text-white">Av. Túpac Amaru 1401</a>
      </div>
    </div>
  </div>

  <div
    class="container px-4 py-5 mx-auto flex items-center justify-between"
    aria-label="Content Navigartor"
  >
    <a href="/" class="flex items-center">
      <img src="/img/logo AI2-logopng-04.webp" alt="Don Emiliano Logo" class="w-18 h-auto" />
    </a>

    <button
      type="button"
      aria-label="Ver horario de atención"
      class="flex items-center gap-3 px-4 py-2 rounded-lg border border-gray-200 bg-gray-50"
    >
      <div class="relative flex items-center">
        <span
          class={`relative inline-flex w-3 h-3 rounded-full ${isOpen ? 'bg-green-500' : 'bg-red-500'}`}
        >
          {
            isOpen && (
              <span class="absolute inset-0 inline-flex w-full h-full rounded-full bg-green-400 opacity-75 animate-ping" />
            )
          }
        </span>
      </div>
      <div class="flex flex-col items-start">
        <p class="text-sm font-semibold text-gray-800">
          {isOpen ? 'Abierto ahora' : 'Cerrado'}
        </p>
        <p class="text-xs text-gray-600">Lun-Sab: 7am - 10pm</p>
      </div>
    </button>

    <!-- THIS CONTENT WILL BE PLACE IT?
    <!-- <nav class="hidden md:block" arial-label="Main Navigation"> -->
    <!--   <ul class="inline-flex items-center gap-x-5 font-bold text-xl"> -->
    <!--     <li> -->
    <!--       <MenuDropNav -->
    <!--         title="Inicio" -->
    <!--         items={[ -->
    <!--           { name: 'Home', url: '/' }, -->
    <!--           { name: 'Menu', url: '/menu' }, -->
    <!--           { name: 'Content', url: '/content' }, -->
    <!--         ]} -->
    <!--       /> -->
    <!--     </li> -->
    <!--     <li> -->
    <!--       <MenuDropNav -->
    <!--         title="Paginas" -->
    <!--         items={[ -->
    <!--           { name: 'Acerca de Nostros', url: '/about-us' }, -->
    <!--           { name: 'Nuestra Historia', url: '/our-history' }, -->
    <!--           { name: 'Galeria', url: '/gallery' }, -->
    <!--         ]} -->
    <!--       /> -->
    <!--     </li> -->
    <!--     { -->
    <!--       links.map(({ name, url }) => ( -->
    <!--         <li> -->
    <!--           <a href={url} class="block transition hover:text-amber-400"> -->
    <!--             {name} -->
    <!--           </a> -->
    <!--         </li> -->
    <!--       )) -->
    <!--     } -->
    <!--     <li> -->
    <!--       <a -->
    <!--         href="'/make-your-book" -->
    <!--         class="px-6 py-2 bg-amber-400 text-center rounded-md hover:bg-amber-400/80" -->
    <!--       > -->
    <!--         Reserva -->
    <!--       </a> -->
    <!--     </li> -->
    <!--   </ul> -->
    <!-- </nav> -->
  </div>
</header>
